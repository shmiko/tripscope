{"version":3,"file":"/packages/telescope-module-embedly.js","sources":["telescope-module-embedly/lib/embedly.js","telescope-module-embedly/lib/client/post_thumbnail.html","telescope-module-embedly/lib/client/post_thumbnail.js","telescope-module-embedly/lib/client/post_video.html","telescope-module-embedly/lib/client/post_video.js"],"names":[],"mappings":";;;;;;;;AAAA,yB;AACA,+B;AACA,mB;AACA,iB;AACA,kB;AACA,G;AACA,C;AACA,wC;;AAEA,qB;AACA,wB;AACA,mB;AACA,iB;AACA,mB;AACA,kB;AACA,G;AACA,C;AACA,oC;;;AAGA,kB;AACA,6B;AACA,yB;AACA,G;;AAEA,0B;AACA,6B;AACA,mB;AACA,iB;AACA,mB;AACA,e;AACA,sB;AACA,K;AACA,G;AACA,C;AACA,6C;;;;;;;;;;;;;;;;;;;AClCA,sC;AACA,gF;AACA,kB;AACA,gC;AACA,uD;AACA,iB;AACA,+B;AACA,2B;AACA,6F;AACA,Q;AACA,wB;AACA,2D;AACA,Q;AACA,sB;AACA,6B;AACA,sC;AACA,uB;AACA,+D;AACA,Q;AACA,2C;AACA,4B;AACA,mC;AACA,gD;AACA,iB;AACA,uD;AACA,c;AACA,+D;AACA,8C;AACA,Q;AACA,mB;AACA,2C;AACA,kD;AACA,S;AACA,iB;AACA,O;AACA,I;;;;;;;;;;;;;;;;;;;ACpCA,gD;AACA,yB;AACA,sE;AACA,I;AACA,+B;AACA,yD;AACA,I;AACA,8B;AACA,oC;AACA,G;AACA,G;;AAEA,+C;AACA,mD;AACA,uB;AACA,2C;AACA,6E;AACA,G;AACA,E;;;;;;;;;;;;;;;;;;;ACjBA,kC;AACA,wE;AACA,kB;AACA,oC;AACA,gD;AACA,iB;AACA,iC;AACA,2C;AACA,2B;AACA,0C;AACA,e;AACA,mC;AACA,0C;AACA,4C;AACA,wE;AACA,yC;AACA,K;AACA,I;;;;;;;;;;;;;;;;;;;AClBA,2C;AACA,+E;AACA,uB;AACA,8E;AACA,8C;AACA,G;AACA,E","sourcesContent":["var thumbnailProperty = {\n  propertyName: 'thumbnailUrl',\n  propertySchema: {\n    type: String,\n    optional: true\n  }\n}\naddToPostSchema.push(thumbnailProperty);\n\nvar mediaProperty = {\n  propertyName: 'media',\n  propertySchema: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  }\n}\naddToPostSchema.push(mediaProperty);\n\n\npostModules.push({\n  template: 'postThumbnail', \n  position: 'center-left'\n});\n\nvar embedlyKeyProperty = {\n  propertyName: 'embedlyKey',\n  propertySchema: {\n    type: String,\n    optional: true,\n    autoform: {\n      group: 'embedly'\n    }\n  }\n}\naddToSettingsSchema.push(embedlyKeyProperty);","\nTemplate.__checkName(\"postThumbnail\");\nTemplate[\"postThumbnail\"] = new Template(\"Template.postThumbnail\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"thumbnailUrl\"));\n  }, function() {\n    return [ \"\\n    \", HTML.A({\n      \"class\": function() {\n        return [ \"post-thumbnail-link \", Spacebars.mustache(view.lookup(\"playVideoClass\")) ];\n      },\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"postLink\"));\n      },\n      target: \"_blank\"\n    }, \"\\n      \", HTML.IMG({\n      \"class\": \"post-thumbnail-image\",\n      src: function() {\n        return Spacebars.mustache(view.lookup(\"thumbnailUrl\"));\n      },\n      onerror: \"this.style.display='none';\"\n    }), \"\\n    \"), \"\\n  \" ];\n  }), \"\\n  \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"media\"));\n  }, function() {\n    return [ \"\\n    \", Blaze._TemplateWith(function() {\n      return {\n        template: Spacebars.call(view.lookup(\"videoTemplate\")),\n        data: Spacebars.call(view.lookup(\".\"))\n      };\n    }, function() {\n      return Spacebars.include(function() {\n        return Spacebars.call(Template.__dynamic);\n      });\n    }), \"\\n  \" ];\n  }) ];\n}));\n","Template[getTemplate('postThumbnail')].helpers({\n  postLink: function () {\n    return !!this.url ? getOutgoingUrl(this.url) : \"/posts/\"+this._id;\n  },\n  playVideoClass: function () {\n    return !!this.media ? 'post-thumbnail-has-video': '';\n  },\n  videoTemplate: function () {\n    return getTemplate('postVideo');\n  }\n});\n\nTemplate[getTemplate('postThumbnail')].events({\n  'click .post-thumbnail-has-video': function (e) {\n    e.preventDefault();\n    $('body').addClass('showing-lightbox');\n    $(e.target).parents('.post').find('.post-video-lightbox').fadeIn('fast');\n  }\n})","\nTemplate.__checkName(\"postVideo\");\nTemplate[\"postVideo\"] = new Template(\"Template.postVideo\", (function() {\n  var view = this;\n  return Spacebars.With(function() {\n    return Spacebars.call(view.lookup(\"media\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"post-video-lightbox hidden\"\n    }, \"\\n      \", HTML.A({\n      \"class\": \"post-video-lightbox-hide\",\n      href: \"#\"\n    }, \"Ã—\"), \"\\n      \", HTML.DIV({\n      \"class\": \"post-video-lightbox-inner\"\n    }, \"\\n        \", Blaze.View(function() {\n      return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"html\")));\n    }), \"\\n      \"), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n","Template[getTemplate('postVideo')].events({\n  'click .post-video-lightbox-hide, click .post-video-lightbox': function (e) {\n    e.preventDefault();\n    $(e.target).parents('.post').find('.post-video-lightbox').fadeOut('fast');\n    $('body').removeClass('showing-lightbox');\n  }\n})"]}